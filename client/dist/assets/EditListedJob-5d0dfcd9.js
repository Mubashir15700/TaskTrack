import{a as A,r,e as D,j as u,J as F,K as x,_ as i,M as L,N as C,S as P,O as R}from"./index-4386c688.js";const T=()=>{const{id:c}=A(),[t,a]=r.useState({}),[b,d]=r.useState(!1),[f,h]=r.useState({}),[g,n]=r.useState(""),l=D();r.useEffect(()=>{(async()=>{try{const s=await x(c);s&&s.status===200&&s.job?a(s.job):i.error("Failed to fetch job data.")}catch(s){console.log(s),i.error("An error occurred while fetching job data.")}finally{}})()},[]);const m=e=>{d(!0);const{name:s,value:o}=e.target;a({...t,[s]:o})},j=(e,s)=>{d(!0);const o=[...t.fields];o[e]={...o[e],...s},a({...t,fields:o})},p=()=>{a({...t,fields:[...t.fields,{name:"",workers:1}]})},E=e=>{const s=[...t.fields];s.splice(e,1),a({...t,fields:s})},J=e=>{a({...t,location:e}),d(!0)},y=async()=>{try{await L.validate(t,{abortEarly:!1});const e=await C(t);e&&(n(e),e.status===200&&(l("/jobs/listed-jobs"),i.success("Edited job successfully")))}catch(e){if(e.name==="ValidationError"){const s={};e.inner.forEach(o=>{s[o.path]=o.message}),h(s)}else console.log(e),n({status:"failed",message:"An error occurred during editing job"})}},w=async()=>{(await P.confirmAction("Delete Job","Are you sure you want to delete this job?","Delete","#d9534f")).isConfirmed&&S()},S=async()=>{try{const e=await R(c);e&&(n(e),e.status===200&&(l("/jobs/listed-jobs"),i.success("Deleted job successfully")))}catch(e){console.log(e),n({status:"failed",message:"An error occurred during deleteing job"})}},v={heading:`Edit ${t.title}`,postData:t,handleInputChange:m,errors:f,newAddressSelected:J,handleFieldChange:j,handleRemoveField:E,handleAddField:p,buttonText:"Edit Job",isChanged:b,handleSubmit:y,handleDeleteJob:w,serverResponse:g};return u.jsx("div",{className:"col-10 my-3 mx-auto",children:u.jsx(F,{...v})})};export{T as default};
